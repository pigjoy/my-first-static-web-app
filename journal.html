<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Journal</title>
    <style>
        /* å…¨å±€æ ·å¼ */
        :root {
            --background-color: #F2F2F7;
            --card-background: #FFFFFF;
            --text-primary: #000000;
            --text-secondary: #8E8E93;
            --accent-color: #FF9500;
            --border-color: #E5E5EA;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --highlight-color: #007AFF;
            --red-color: #FF3B30;
            --green-color: #34C759;
            --yellow-color: #FFCC00;
            --purple-color: #AF52DE;
            --gradient-start: #FF9500;
            --gradient-middle: #FF2D55;
            --gradient-end: #AF52DE;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--background-color);
            color: var(--text-primary);
            line-height: 1.5;
            padding: 0;
            margin: 0;
        }

        /* çŠ¶æ€æ æ ·å¼ */
        .status-bar {
            background-color: var(--background-color);
            padding: 10px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid var(--border-color);
        }

        .status-bar-time {
            font-weight: 600;
            font-size: 16px;
        }

        .status-bar-icons {
            display: flex;
            gap: 8px;
            font-size: 14px;
        }

        /* åº”ç”¨æ ‡é¢˜å’Œæœç´¢æ  */
        .app-header {
            padding: 20px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .app-title {
            font-size: 34px;
            font-weight: 700;
            background: linear-gradient(to right, var(--gradient-start), var(--gradient-middle), var(--gradient-end));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .search-icon, .menu-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--card-background);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px var(--shadow-color);
        }

        .search-icon i, .menu-icon i {
            font-size: 20px;
            color: var(--text-primary);
        }

        /* æœç´¢æ¡† */
        .search-container {
            padding: 0 16px;
            margin-bottom: 20px;
            display: none;
        }

        .search-container.active {
            display: block;
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            border-radius: 10px;
            border: none;
            background-color: var(--card-background);
            font-size: 16px;
            box-shadow: 0 2px 8px var(--shadow-color);
        }

        .search-input:focus {
            outline: none;
            box-shadow: 0 2px 12px rgba(0, 122, 255, 0.2);
        }

        /* ç»Ÿè®¡ä¿¡æ¯ */
        .stats-container {
            display: flex;
            justify-content: space-between;
            padding: 0 16px;
            margin-bottom: 30px;
        }

        .stat-item {
            flex: 1;
            text-align: center;
            padding: 10px;
            border-right: 1px solid var(--border-color);
        }

        .stat-item:last-child {
            border-right: none;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .stat-value i {
            margin-right: 8px;
            color: var(--highlight-color);
            font-size: 24px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* æœˆä»½æ ‡é¢˜ */
        .month-header {
            padding: 0 16px;
            margin-bottom: 20px;
        }

        .month-title {
            font-size: 28px;
            font-weight: 700;
        }

        /* Journal æ¡ç›®å®¹å™¨ */
        .journal-container {
            padding: 0 16px 80px;
        }

        /* Journal æ¡ç›®æ ·å¼ - è´´çº¸æ•ˆæœ */
        .journal-entry {
            background-color: var(--card-background);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px var(--shadow-color);
            position: relative;
            overflow: hidden;
        }

        .journal-date {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .journal-bookmark {
            color: var(--red-color);
            cursor: pointer;
        }

        .journal-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .journal-content {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        /* è´´çº¸åº•éƒ¨è™šåŒ–æ•ˆæœ */
        .journal-entry::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 30px;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.8));
            pointer-events: none;
        }

        /* è´´çº¸åº•éƒ¨è£…é¥° */
        .journal-decoration {
            position: absolute;
            bottom: -10px;
            left: 0;
            right: 0;
            height: 30px;
            opacity: 0.1;
            display: flex;
            justify-content: space-around;
            align-items: center;
            font-size: 20px;
            overflow: hidden;
        }

        /* å›¾ç‰‡ç½‘æ ¼ */
        .image-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }

        .image-item {
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }

        .image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .more-images {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 600;
        }

        /* æµ®åŠ¨æ·»åŠ æŒ‰é’® */
        .add-button {
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            bottom: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: white;
            color: var(--highlight-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 100;
        }
        
        /* æ·»åŠ æŒ‰é’®å‘¨å›´çš„è™šåŒ–æ•ˆæœ */
          /* æ·»åŠ æŒ‰é’®èƒŒåçš„çŸ©å½¢è™šåŒ–åŒºåŸŸåˆ é™¤äº†ï¼Œä¸å¥½ç”¨ */
          
 
       

        /* è¯¦ç»†é¡µé¢æ ·å¼ */
        .detail-page {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--background-color);
            z-index: 200;
            display: none;
            flex-direction: column;
            overflow-y: auto;
        }

        .detail-page.active {
            display: flex;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .detail-header {
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--card-background);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .detail-back {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--background-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .detail-actions {
            display: flex;
            gap: 12px;
        }

        .detail-action {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--background-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .detail-content {
            padding: 20px;
            flex: 1;
        }

        .detail-date {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .detail-title-container {
            margin-bottom: 20px;
        }

        .detail-title {
            font-size: 24px;
            font-weight: 600;
            padding: 8px 0;
            border: none;
            background: transparent;
            width: 100%;
            outline: none;
        }

        .detail-title:focus {
            border-bottom: 2px solid var(--highlight-color);
        }

        .detail-body-container {
            margin-bottom: 30px;
        }

        .detail-body {
            font-size: 18px;
            line-height: 1.6;
            padding: 8px 0;
            border: none;
            background: transparent;
            width: 100%;
            min-height: 200px;
            outline: none;
            resize: none;
        }

        .detail-body:focus {
            border-bottom: 2px solid var(--highlight-color);
        }

        /* æ·»åŠ å›¾ç‰‡ç›¸å…³æ ·å¼ */
        .detail-image-container {
            margin: 20px 0;
        }

        .detail-image-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .detail-image-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .detail-image-add {
            padding: 6px 12px;
            background-color: var(--highlight-color);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .detail-image-preview {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .detail-image-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .detail-image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .detail-image-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
        }

        #image-upload {
            display: none;
        }

        .detail-footer {
            padding: 16px;
            display: flex;
            justify-content: flex-end;
            border-top: 1px solid var(--border-color);
            background-color: var(--card-background);
            position: sticky;
            bottom: 0;
        }

        .save-button {
            padding: 10px 20px;
            background-color: var(--highlight-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        .save-button:hover {
            background-color: #0062cc;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (min-width: 768px) {
            .journal-container {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }

            .journal-entry {
                margin-bottom: 0;
            }
        }

        @media (min-width: 1024px) {
            .journal-container {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 480px) {
            .app-title {
                font-size: 28px;
            }

            .stat-value {
                font-size: 24px;
            }

            .month-title {
                font-size: 24px;
            }
        }

        /* é¢œè‰²å˜ä½“ */
        .journal-entry.color-yellow {
            background-color: #FFF9E6;
        }

        .journal-entry.color-green {
            background-color: #E6F9ED;
        }

        .journal-entry.color-blue {
            background-color: #E6F0FF;
        }

        .journal-entry.color-purple {
            background-color: #F2E6FF;
        }

        .journal-entry.color-pink {
            background-color: #FFE6F0;
        }

        /* èœå•å¼¹å‡ºå±‚ */
        .menu-popup {
            position: fixed;
            top: 70px;
            right: 16px;
            background-color: var(--card-background);
            border-radius: 12px;
            box-shadow: 0 4px 16px var(--shadow-color);
            z-index: 1000;
            overflow: hidden;
            display: none;
        }

        .menu-popup.active {
            display: block;
            animation: fadeIn 0.2s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .menu-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .menu-item:hover {
            background-color: var(--background-color);
        }

        .menu-item i {
            font-size: 18px;
            width: 24px;
            text-align: center;
        }

        .menu-item-text {
            font-size: 16px;
        }
        
        /* å³é”®èœå•æ ·å¼ */
        .context-menu {
            position: fixed;
            background-color: var(--card-background);
            border-radius: 12px;
            box-shadow: 0 4px 16px var(--shadow-color);
            z-index: 1000;
            overflow: hidden;
            display: none;
            width: 150px;
            animation: fadeIn 0.2s ease-out;
        }
        
        .context-menu-item {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .context-menu-item:hover {
            background-color: var(--background-color);
        }
        
        .context-menu-item i {
            font-size: 18px;
            width: 24px;
            text-align: center;
        }
        
        /* é€šçŸ¥æ ·å¼ */
        .notification {
            position: fixed;
            bottom: -60px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            z-index: 2000;
            transition: bottom 0.3s ease-out;
        }
        
        .notification.show {
            bottom: 30px;
        }
    </style>
</head>
<body>
    <!-- åº”ç”¨æ ‡é¢˜å’Œæœç´¢æŒ‰é’® -->
    <header class="app-header">
        <h1 class="app-title">journal</h1>
        <div class="header-controls">
            <div class="search-icon" id="search-toggle">
                <i>ğŸ”</i>
            </div>
            <div class="menu-icon">
                <i>â‹¯</i>
            </div>
        </div>
    </header>

    <!-- æœç´¢æ¡† -->
    <div class="search-container" id="search-container">
        <input type="text" class="search-input" id="search-input" placeholder="æœç´¢ Journal...">
    </div>

    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <div class="stats-container" id="stats-container">
        <div class="stat-item">
            <div class="stat-value">
                <i>ğŸ“</i>
            </div>
            <div class="stat-label">Entries This Year</div>
        </div>
        <div class="stat-item">
            <div class="stat-value">
                <i>ğŸ’¬</i> 
            </div>
            <div class="stat-label">Words Written</div>
        </div>
        <div class="stat-item">
            <div class="stat-value">
                <i>ğŸ“…</i>
            </div>
            <div class="stat-label">Days Journaled</div>
        </div>
    </div>

    <!-- æœˆä»½æ ‡é¢˜ -->
    <div class="month-header">
        <h2 class="month-title">December 2024</h2>
    </div>

    <!-- Journal æ¡ç›®å®¹å™¨ -->
    <div class="journal-container" id="journal-container">
        <!-- Journal æ¡ç›® 1 -->
        <article class="journal-entry color-yellow">
            <div class="journal-date">
                <span>Thursday, Dec 19, 2024</span>
                <span class="journal-bookmark">ğŸ”–</span>
            </div>
            <h3 class="journal-title">å…ƒè®¤çŸ¥</h3>
            <div class="journal-content">
                <p>å­¦ä¼šæš‚åœï¼šæƒ…ç»ªæ³¢åŠ¨æ—¶ï¼Œä¸æ€¥äºè¡ŒåŠ¨ï¼Œå…ˆæ·±å‘¼å¸å‡ æ¬¡ã€‚</p>
                <p>æ‰¾å›ç†æ€§ï¼šå†™ä¸‹å½“å‰çš„æ„Ÿå—ï¼Œå¹¶å°è¯•ç”¨äº‹å®æ ¸å¯¹è‡ªå·±çš„æƒ³æ³•æ˜¯å¦å‡†ç¡®ã€‚</p>
                <p>åˆ†æ•£æ³¨æ„åŠ›ï¼šé€šè¿‡è¿åŠ¨ã€å¬éŸ³ä¹ç­‰æ–¹å¼è°ƒèŠ‚å¿ƒæ€ï¼Œè®©æƒ…ç»ªé€æ¸å¹³å¤ã€‚</p>
                <p>å­¦ä¹ ï¼šé˜…è¯»ã€è¯·æ•™ã€å®è·µï¼Œè·å–å¤šå…ƒåŒ–çš„çŸ¥è¯†ã€‚æ•™å‘˜é’å¹´æ—¶æœŸé€šè¯»é©¬åˆ—è‘—ä½œï¼Œå°±æ˜¯ä¸ºäº†å»ºç«‹æ›´é«˜å±‚æ¬¡çš„æ€ç»´æ¡†æ¶ã€‚</p>
            </div>
            <div class="journal-decoration">
                âœ¨ ğŸ“ ğŸ’­ ğŸ§  ğŸ“š âœ¨ ğŸ“ ğŸ’­ ğŸ§  ğŸ“š
            </div>
        </article>

        <!-- Journal æ¡ç›® 2 -->
        <article class="journal-entry color-blue">
            <div class="journal-date">
                <span>Wednesday, Dec 18, 2024</span>
                <span class="journal-bookmark">ğŸ”–</span>
            </div>
            <div class="image-grid">
                <div class="image-item">
                    <img src="https://picsum.photos/200/200?random=1" alt="Journal image">
                </div>
                <div class="image-item">
                    <img src="https://picsum.photos/200/200?random=2" alt="Journal image">
                </div>
                <div class="image-item">
                    <img src="https://picsum.photos/200/200?random=3" alt="Journal image">
                </div>
                <div class="image-item">
                    <img src="https://picsum.photos/200/200?random=4" alt="Journal image">
                </div>
                <div class="image-item">
                    <img src="https://picsum.photos/200/200?random=5" alt="Journal image">
                </div>
                <div class="image-item">
                    <img src="https://picsum.photos/200/200?random=6" alt="Journal image">
                    <div class="more-images">+3</div>
                </div>
            </div>
            <div class="journal-content">
                <p>é‡è§æ˜¯å› ä¸ºæœ‰ç¼˜åˆ†è¿˜æ˜¯ç¦»å¼€æ˜¯å› ä¸ºèµ°æ•£äº†</p>
                <p>å‰ä¸–ä¸æ¬ </p>
                <p>ä»Šç”Ÿä¸è§</p>
                <p>ä»Šç”Ÿç›¸è§ï¼Œå®šæœ‰äºæ¬ </p>
                <p>ç¼˜èµ·ï¼Œæˆ‘åœ¨äººç¾¤ä¸­çœ‹è§ä½ </p>
                <p>ç¼˜ç­ï¼Œæˆ‘çœ‹è§ä½ åœ¨äººç¾¤ä¸­</p>
            </div>
            <div class="journal-decoration">
                ğŸŒŸ ğŸ“· ğŸ­ ğŸŒˆ âœ¨ ğŸŒŸ ğŸ“· ğŸ­ ğŸŒˆ âœ¨
            </div>
        </article>

        <!-- Journal æ¡ç›® 3 -->
        <article class="journal-entry color-green">
            <div class="journal-date">
                <span>Monday, Dec 16, 2024</span>
                <span class="journal-bookmark">ğŸ”–</span>
            </div>
            <h3 class="journal-title">ä»Šæ—¥åæ€</h3>
            <div class="journal-content">
                <p>ä»Šå¤©å®Œæˆäº†é¡¹ç›®çš„ç¬¬ä¸€é˜¶æ®µï¼Œå›¢é˜Ÿåˆä½œéå¸¸é¡ºåˆ©ã€‚æˆ‘å‘ç°å½“æˆ‘ä¸»åŠ¨æ‰¿æ‹…è´£ä»»å¹¶æ¸…æ™°åœ°æ²Ÿé€šæœŸæœ›æ—¶ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¼šæ›´åŠ é«˜æ•ˆã€‚</p>
                <p>æ˜å¤©éœ€è¦å¼€å§‹å‡†å¤‡ä¸‹ä¸€é˜¶æ®µçš„å·¥ä½œï¼Œé‡ç‚¹æ˜¯æ”¹è¿›ç”¨æˆ·ç•Œé¢å’Œä¼˜åŒ–æ€§èƒ½ã€‚æˆ‘è®¡åˆ’æ—©èµ·ä¸€å°æ—¶ï¼Œè¿™æ ·å¯ä»¥åœ¨åŠå…¬å®¤å®‰é™çš„æ—¶å€™é›†ä¸­ç²¾åŠ›æ€è€ƒè¿™äº›é—®é¢˜ã€‚</p>
            </div>
            <div class="journal-decoration">
                ğŸŒ± ğŸ’¡ ğŸ”„ ğŸ“Š âœ… ğŸŒ± ğŸ’¡ ğŸ”„ ğŸ“Š âœ…
            </div>
        </article>

        <!-- Journal æ¡ç›® 4 -->
        <article class="journal-entry color-purple">
            <div class="journal-date">
                <span>Sunday, Dec 15, 2024</span>
                <span class="journal-bookmark">ğŸ”–</span>
            </div>
            <h3 class="journal-title">å‘¨æœ«æ„Ÿæƒ³</h3>
            <div class="journal-content">
                <p>è¿™ä¸ªå‘¨æœ«ç»ˆäºæœ‰æ—¶é—´å»äº†é‚£å®¶æœŸå¾…å·²ä¹…çš„å’–å•¡é¦†ã€‚ç¯å¢ƒæ¯”æƒ³è±¡ä¸­è¿˜è¦å¥½ï¼Œè§’è½çš„ä½ç½®é˜³å…‰æ­£å¥½ï¼Œä¸€æ¯æ‹¿é“é…ä¸Šä¸€æœ¬å¥½ä¹¦ï¼Œæ—¶å…‰ç¼“ç¼“æµæ·Œã€‚</p>
                <p>å¶ç„¶é‡åˆ°äº†å¤§å­¦æ—¶çš„æœ‹å‹ï¼ŒèŠäº†å¾ˆå¤šè¿‘å†µã€‚æ„Ÿæ…¨æ—¶é—´è¿‡å¾—çœŸå¿«ï¼Œä½†å¾ˆé«˜å…´çœ‹åˆ°å¤§å®¶éƒ½åœ¨å„è‡ªçš„é“è·¯ä¸ŠåŠªåŠ›å‰è¡Œã€‚</p>
                <p>æ˜å¤©å¼€å§‹æ–°çš„ä¸€å‘¨ï¼Œå¸Œæœ›èƒ½ä¿æŒè¿™ç§å¹³é™çš„å¿ƒæ€é¢å¯¹å·¥ä½œä¸­çš„æŒ‘æˆ˜ã€‚</p>
            </div>
            <div class="journal-decoration">
                â˜• ğŸ“š ğŸŒ ğŸ‘« ğŸŒˆ â˜• ğŸ“š ğŸŒ ğŸ‘« ğŸŒˆ
            </div>
        </article>

        <!-- Journal æ¡ç›® 5 -->
        <article class="journal-entry color-pink">
            <div class="journal-date">
                <span>Friday, Dec 13, 2024</span>
                <span class="journal-bookmark">ğŸ”–</span>
            </div>
            <h3 class="journal-title">çµæ„Ÿè®°å½•</h3>
            <div class="journal-content">
                <p>ä»Šå¤©åœ¨é€šå‹¤è·¯ä¸Šçªç„¶æœ‰äº†ä¸€ä¸ªæ–°é¡¹ç›®çš„æƒ³æ³•ï¼šä¸€ä¸ªèƒ½å¤Ÿå¸®åŠ©äººä»¬è¿½è¸ªæ—¥å¸¸ä¹ æƒ¯å¹¶æä¾›å¯è§†åŒ–åé¦ˆçš„åº”ç”¨ã€‚</p>
                <p>å…³é”®åŠŸèƒ½ï¼š</p>
                <p>- è‡ªå®šä¹‰ä¹ æƒ¯è¿½è¸ª</p>
                <p>- è¿›åº¦å¯è§†åŒ–</p>
                <p>- æˆå°±ç³»ç»Ÿ</p>
                <p>- ç¤¾åŒºæ”¯æŒ</p>
                <p>å‘¨æœ«è¦ç”»ä¸€äº›è‰å›¾å¹¶åšä¸€äº›å¸‚åœºè°ƒç ”ï¼Œçœ‹çœ‹è¿™ä¸ªæƒ³æ³•æ˜¯å¦å¯è¡Œã€‚</p>
            </div>
            <div class="journal-decoration">
                ğŸ’¡ ğŸš€ ğŸ“± ğŸ¨ ğŸ“Š ğŸ’¡ ğŸš€ ğŸ“± ğŸ¨ ğŸ“Š
            </div>
        </article>
    </div>

    <!-- æµ®åŠ¨æ·»åŠ æŒ‰é’® -->
    <div class="add-button" id="add-button">+</div>

    <!-- èœå•å¼¹å‡ºå±‚ -->
    <div class="menu-popup" id="menu-popup">
        <div class="menu-item" id="bookmark-all">
            <i>ğŸ”–</i>
            <span class="menu-item-text">æ”¶è—æ‰€æœ‰æ—¥è®°</span>
        </div>
        <div class="menu-item" id="bookmark-today">
            <i>ğŸ“Œ</i>
            <span class="menu-item-text">æ”¶è—ä»Šæ—¥æ—¥è®°</span>
        </div>
        <div class="menu-item" id="export-journals">
            <i>ğŸ“¤</i>
            <span class="menu-item-text">å¯¼å‡ºæ—¥è®°</span>
        </div>
        <div class="menu-item" id="settings">
            <i>âš™ï¸</i>
            <span class="menu-item-text">è®¾ç½®</span>
        </div>
    </div>

    <!-- è¯¦ç»†é¡µé¢ -->
    <div class="detail-page" id="detail-page">
        <div class="detail-header">
            <div class="detail-back" id="detail-back">
                <i>â†</i>
            </div>
            <div class="detail-actions">
                <div class="detail-action" id="detail-bookmark">
                    <i>ğŸ”–</i>
                </div>
                <div class="detail-action" id="detail-delete">
                    <i>ğŸ—‘ï¸</i>
                </div>
            </div>
        </div>
        <div class="detail-content">
            <div class="detail-date">
                <span id="detail-date-text">Thursday, Dec 19, 2024</span>
            </div>
            <div class="detail-title-container">
                <input type="text" class="detail-title" id="detail-title" placeholder="æ ‡é¢˜">
            </div>
            <div class="detail-body-container">
                <textarea class="detail-body" id="detail-body" placeholder="å†™ä¸‹ä½ çš„æƒ³æ³•..."></textarea>
            </div>
            
            <!-- æ·»åŠ å›¾ç‰‡éƒ¨åˆ† -->
            <div class="detail-image-container">
                <div class="detail-image-header">
                    <div class="detail-image-title">å›¾ç‰‡</div>
                    <label for="image-upload" class="detail-image-add">
                        <i>ğŸ“·</i>
                        <span>æ·»åŠ å›¾ç‰‡</span>
                    </label>
                    <input type="file" id="image-upload" accept="image/*" multiple>
                </div>
                <div class="detail-image-preview" id="detail-image-preview">
                    <!-- å›¾ç‰‡é¢„è§ˆå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                </div>
            </div>
        </div>
        <div class="detail-footer">
            <button class="save-button" id="save-button">ä¿å­˜</button>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // è°ƒè¯•ä¿¡æ¯
            console.log('DOM fully loaded');
            
            // è·å–DOMå…ƒç´ å¹¶éªŒè¯
            const detailBackBtn = document.getElementById('detail-back');
            console.log('Detail back button:', detailBackBtn);
            
            if (detailBackBtn) {
                // ç¡®ä¿äº‹ä»¶ç›‘å¬å™¨è¢«æ­£ç¡®æ·»åŠ 
                detailBackBtn.addEventListener('click', function(e) {
                    console.log('Back button clicked');
                    e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡
                    
                    // å¦‚æœæœ‰æœªä¿å­˜çš„æ›´æ”¹ï¼Œæç¤ºç”¨æˆ·
                    if (hasUnsavedChanges()) {
                        if (confirm('æœ‰æœªä¿å­˜çš„æ›´æ”¹ï¼Œç¡®å®šè¦è¿”å›å—ï¼Ÿ')) {
                            detailPage.classList.remove('active');
                        }
                    } else {
                        detailPage.classList.remove('active');
                    }
                });
                
                // æ·»åŠ é¼ æ ‡æ‚¬åœæ•ˆæœä»¥æä¾›è§†è§‰åé¦ˆ
                detailBackBtn.style.cursor = 'pointer';
                detailBackBtn.addEventListener('mouseover', function() {
                    this.style.backgroundColor = 'var(--border-color)';
                });
                detailBackBtn.addEventListener('mouseout', function() {
                    this.style.backgroundColor = 'var(--background-color)';
                });
            } else {
                console.error('Detail back button not found in the DOM');
            }
            
            // è·å–DOMå…ƒç´ 
            const searchToggle = document.getElementById('search-toggle');
            const searchContainer = document.getElementById('search-container');
            const searchInput = document.getElementById('search-input');
            const journalContainer = document.getElementById('journal-container');
            const statsContainer = document.getElementById('stats-container');
            const addButton = document.getElementById('add-button');
            const statusBarTime = document.querySelector('.status-bar-time');
            const menuIcon = document.querySelector('.menu-icon');
            const menuPopup = document.getElementById('menu-popup');
            const bookmarkAll = document.getElementById('bookmark-all');
            const bookmarkToday = document.getElementById('bookmark-today');
            const exportJournals = document.getElementById('export-journals');
            const settings = document.getElementById('settings');
            
            // æ‰€æœ‰Journalæ¡ç›®
            const journalEntries = document.querySelectorAll('.journal-entry');
            const detailPage = document.getElementById('detail-page');
            const detailDateText = document.getElementById('detail-date-text');
            const detailTitle = document.getElementById('detail-title');
            const detailBody = document.getElementById('detail-body');
            const detailBookmark = document.getElementById('detail-bookmark');
            const detailDelete = document.getElementById('detail-delete');
            const saveButton = document.getElementById('save-button');
            
            // å½“å‰é€‰ä¸­çš„æ—¥è®°æ¡ç›®
            let currentEntry = null;
            
            // åˆ‡æ¢æœç´¢æ¡†æ˜¾ç¤º/éšè—
            searchToggle.addEventListener('click', function() {
                searchContainer.classList.toggle('active');
                if (searchContainer.classList.contains('active')) {
                    searchInput.focus();
                } else {
                    searchInput.value = '';
                    // é‡ç½®æœç´¢ç»“æœï¼Œæ˜¾ç¤ºæ‰€æœ‰æ¡ç›®
                    journalEntries.forEach(entry => {
                        entry.style.display = 'block';
                    });
                }
            });
            
            // èœå•å¼¹å‡ºå±‚æ˜¾ç¤º/éšè—
            menuIcon.addEventListener('click', function(e) {
                e.stopPropagation();
                menuPopup.classList.toggle('active');
            });
            
            // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­èœå•
            document.addEventListener('click', function(e) {
                if (menuPopup.classList.contains('active') && !menuPopup.contains(e.target) && e.target !== menuIcon) {
                    menuPopup.classList.remove('active');
                }
            });
            
            // èœå•é¡¹ç‚¹å‡»äº‹ä»¶
            bookmarkAll.addEventListener('click', function() {
                // æ”¶è—æ‰€æœ‰æ—¥è®°
                journalEntries.forEach(entry => {
                    const bookmark = entry.querySelector('.journal-bookmark');
                    bookmark.textContent = 'ğŸ”–';
                });
                alert('å·²æ”¶è—æ‰€æœ‰æ—¥è®°');
                menuPopup.classList.remove('active');
            });
            
            bookmarkToday.addEventListener('click', function() {
                // è·å–ä»Šå¤©çš„æ—¥æœŸ
                const today = new Date();
                const todayStr = today.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric', year: 'numeric' });
                
                // æ”¶è—ä»Šå¤©çš„æ—¥è®°
                let found = false;
                journalEntries.forEach(entry => {
                    const dateText = entry.querySelector('.journal-date span').textContent;
                    if (dateText.includes(today.getDate())) {
                        const bookmark = entry.querySelector('.journal-bookmark');
                        bookmark.textContent = 'ğŸ”–';
                        found = true;
                    }
                });
                
                if (found) {
                    alert('å·²æ”¶è—ä»Šæ—¥æ—¥è®°');
                } else {
                    alert('æœªæ‰¾åˆ°ä»Šæ—¥æ—¥è®°');
                }
                menuPopup.classList.remove('active');
            });
            
            exportJournals.addEventListener('click', function() {
                alert('å¯¼å‡ºæ—¥è®°åŠŸèƒ½å³å°†ä¸Šçº¿');
                menuPopup.classList.remove('active');
            });
            
            settings.addEventListener('click', function() {
                alert('è®¾ç½®é¡µé¢å³å°†ä¸Šçº¿');
                menuPopup.classList.remove('active');
            });
            
            // æœç´¢åŠŸèƒ½
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase().trim();
                
                if (searchTerm === '') {
                    // å¦‚æœæœç´¢æ¡†ä¸ºç©ºï¼Œæ˜¾ç¤ºæ‰€æœ‰æ¡ç›®
                    journalEntries.forEach(entry => {
                        entry.style.display = 'block';
                    });
                    return;
                }
                
                // éå†æ‰€æœ‰æ¡ç›®ï¼Œæ ¹æ®æœç´¢è¯è¿‡æ»¤
                journalEntries.forEach(entry => {
                    const content = entry.textContent.toLowerCase();
                    if (content.includes(searchTerm)) {
                        entry.style.display = 'block';
                    } else {
                        entry.style.display = 'none';
                    }
                });
            });
            
            // çŠ¶æ€æ ç‚¹å‡»è·³è½¬
            statsContainer.addEventListener('click', function() {
                alert('è·³è½¬åˆ°ç»Ÿè®¡è¯¦æƒ…é¡µé¢');
            });
            
            // æ·»åŠ æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            addButton.addEventListener('click', function() {
                alert('æ‰“å¼€æ–°å»ºJournalé¡µé¢');
                // è¿™é‡Œåº”è¯¥æ·»åŠ åˆ›å»ºæ–°æ—¥è®°çš„é€»è¾‘
                // åˆ›å»ºå®Œæˆåè°ƒç”¨ calculateStats();
            });
            
            // æ·»åŠ æ–°æ—¥è®°åŠŸèƒ½
            addButton.addEventListener('click', function() {
                // æ¸…ç©ºè¯¦æƒ…é¡µå†…å®¹
                detailDateText.textContent = getCurrentDateFormatted();
                detailTitle.value = '';
                detailBody.value = '';
                detailBookmark.innerHTML = '<i>ğŸ”—</i>';
                
                // é‡ç½®å½“å‰æ¡ç›®å¼•ç”¨
                currentEntry = null;
                
                // æ˜¾ç¤ºè¯¦æƒ…é¡µ
                detailPage.classList.add('active');
                
                // èšç„¦åˆ°æ ‡é¢˜è¾“å…¥æ¡†
                setTimeout(() => {
                    detailTitle.focus();
                }, 300);
            });
            
            // è·å–å½“å‰æ—¥æœŸçš„æ ¼å¼åŒ–å­—ç¬¦ä¸²
            function getCurrentDateFormatted() {
                const now = new Date();
                const options = { weekday: 'long', year: 'numeric', month: 'short', day: 'numeric' };
                return now.toLocaleDateString('en-US', options);
            }
            
            // ä¿å­˜æŒ‰é’®ç‚¹å‡»äº‹ä»¶ - ä¿®æ”¹ä¸ºæ”¯æŒæ–°å»ºå’Œç¼–è¾‘
            saveButton.addEventListener('click', function() {
                const newTitle = detailTitle.value;
                const newContent = detailBody.value;
                
                if (currentEntry) {
                    // ç¼–è¾‘ç°æœ‰æ—¥è®°
                    updateJournalEntry(currentEntry, newTitle, newContent);
                } else {
                    // åˆ›å»ºæ–°æ—¥è®°
                    const newEntry = createNewJournalEntry(newTitle, newContent);
                    journalContainer.insertBefore(newEntry, journalContainer.firstChild);
                }
                
                // é‡æ–°è®¡ç®—ç»Ÿè®¡æ•°æ®
                calculateStats();
                saveJournalEntries();
                
                alert('æ—¥è®°å·²ä¿å­˜');
                detailPage.classList.remove('active');
            });
            
            // æ›´æ–°ç°æœ‰æ—¥è®°æ¡ç›®
            function updateJournalEntry(entry, title, content) {
                // æ›´æ–°æ ‡é¢˜
                let titleElement = entry.querySelector('.journal-title');
                if (title) {
                    if (!titleElement) {
                        titleElement = document.createElement('h3');
                        titleElement.className = 'journal-title';
                        const dateElement = entry.querySelector('.journal-date');
                        entry.insertBefore(titleElement, dateElement.nextSibling);
                    }
                    titleElement.textContent = title;
                } else if (titleElement) {
                    titleElement.remove();
                }
                
                // æ›´æ–°å†…å®¹
                const contentElement = entry.querySelector('.journal-content');
                if (contentElement) {
                    contentElement.innerHTML = '';
                    const paragraphs = content.split('\n\n');
                    paragraphs.forEach(paragraph => {
                        if (paragraph.trim()) {
                            const p = document.createElement('p');
                            p.textContent = paragraph;
                            contentElement.appendChild(p);
                        }
                    });
                }
            }
            
            // åˆ›å»ºæ–°æ—¥è®°æ¡ç›®
            function createNewJournalEntry(title, content, date = getCurrentDateFormatted(), colorClass = null) {
                // åˆ›å»ºæ–°çš„æ—¥è®°æ¡ç›®å…ƒç´ 
                const newEntry = document.createElement('article');
                
                // éšæœºé€‰æ‹©ä¸€ä¸ªé¢œè‰²ç±»
                const colorClasses = ['color-yellow', 'color-blue', 'color-green', 'color-purple', 'color-pink'];
                const randomColorClass = colorClass || colorClasses[Math.floor(Math.random() * colorClasses.length)];
                newEntry.className = `journal-entry ${randomColorClass}`;
                
                // åˆ›å»ºæ—¥æœŸéƒ¨åˆ†
                const dateDiv = document.createElement('div');
                dateDiv.className = 'journal-date';
                
                const dateSpan = document.createElement('span');
                dateSpan.textContent = date;
                
                const bookmarkSpan = document.createElement('span');
                bookmarkSpan.className = 'journal-bookmark';
                bookmarkSpan.textContent = 'ğŸ”—';
                
                dateDiv.appendChild(dateSpan);
                dateDiv.appendChild(bookmarkSpan);
                newEntry.appendChild(dateDiv);
                
                // å¦‚æœæœ‰æ ‡é¢˜ï¼Œæ·»åŠ æ ‡é¢˜
                if (title) {
                    const titleElement = document.createElement('h3');
                    titleElement.className = 'journal-title';
                    titleElement.textContent = title;
                    newEntry.appendChild(titleElement);
                }
                
                // æ·»åŠ å†…å®¹
                const contentDiv = document.createElement('div');
                contentDiv.className = 'journal-content';
                
                const paragraphs = content.split('\n\n');
                paragraphs.forEach(paragraph => {
                    if (paragraph.trim()) {
                        const p = document.createElement('p');
                        p.textContent = paragraph;
                        contentDiv.appendChild(p);
                    }
                });
                
                newEntry.appendChild(contentDiv);
                
                // æ·»åŠ è£…é¥°
                const decorationDiv = document.createElement('div');
                decorationDiv.className = 'journal-decoration';
                
                // æ ¹æ®é¢œè‰²ç±»é€‰æ‹©ä¸åŒçš„è£…é¥°å›¾æ¡ˆ
                let decorationPattern = '';
                switch (randomColorClass) {
                    case 'color-yellow':
                        decorationPattern = 'âœ¨ ğŸ“ ğŸ’­ ğŸ§  ğŸ“š âœ¨ ğŸ“ ğŸ’­ ğŸ§  ğŸ“š';
                        break;
                    case 'color-blue':
                        decorationPattern = 'ğŸŒŸ ğŸ“· ğŸ­ ğŸŒˆ âœ¨ ğŸŒŸ ğŸ“· ğŸ­ ğŸŒˆ âœ¨';
                        break;
                    case 'color-green':
                        decorationPattern = 'ğŸŒ± ğŸ’¡ ğŸ”„ ğŸ“Š âœ… ğŸŒ± ğŸ’¡ ğŸ”„ ğŸ“Š âœ…';
                        break;
                    case 'color-purple':
                        decorationPattern = 'â˜• ğŸ“š ğŸŒ ğŸ‘« ğŸŒˆ â˜• ğŸ“š ğŸŒ ğŸ‘« ğŸŒˆ';
                        break;
                    case 'color-pink':
                        decorationPattern = 'ğŸ’¡ ğŸš€ ğŸ“± ğŸ¨ ğŸ“Š ğŸ’¡ ğŸš€ ğŸ“± ğŸ¨ ğŸ“Š';
                        break;
                }
                
                decorationDiv.textContent = decorationPattern;
                newEntry.appendChild(decorationDiv);
                
                // å°†æ–°æ¡ç›®æ·»åŠ åˆ°å®¹å™¨çš„å¼€å¤´
                journalContainer.insertBefore(newEntry, journalContainer.firstChild);
                
                // ä¸ºæ–°æ¡ç›®æ·»åŠ ç‚¹å‡»äº‹ä»¶
                addJournalEntryClickEvent(newEntry);
                
                // ä¸ºæ–°æ¡ç›®çš„ä¹¦ç­¾æ·»åŠ ç‚¹å‡»äº‹ä»¶
                addBookmarkClickEvent(newEntry.querySelector('.journal-bookmark'));
                
                // ä¸ºæ–°æ¡ç›®æ·»åŠ å³é”®èœå•
                addContextMenuToEntry(newEntry);
                
                // è¿”å›æ–°åˆ›å»ºçš„æ¡ç›®
                return newEntry;
            }
            
            // ä¸ºæ—¥è®°æ¡ç›®æ·»åŠ ç‚¹å‡»äº‹ä»¶çš„å‡½æ•°
            function addJournalEntryClickEvent(entry) {
                entry.addEventListener('click', function(e) {
                    // å¦‚æœç‚¹å‡»çš„æ˜¯ä¹¦ç­¾å›¾æ ‡ï¼Œä¸æ‰“å¼€è¯¦æƒ…é¡µ
                    if (e.target.classList.contains('journal-bookmark') || 
                        e.target.closest('.journal-bookmark')) {
                        return;
                    }
                    
                    // ä¿å­˜å½“å‰æ¡ç›®å¼•ç”¨
                    currentEntry = entry;
                    
                    // è·å–æ—¥è®°å†…å®¹
                    const dateText = entry.querySelector('.journal-date span').textContent;
                    const titleElement = entry.querySelector('.journal-title');
                    const title = titleElement ? titleElement.textContent : '';
                    
                    // è·å–å†…å®¹æ–‡æœ¬
                    const contentElement = entry.querySelector('.journal-content');
                    let content = '';
                    if (contentElement) {
                        // å°†HTMLå†…å®¹è½¬æ¢ä¸ºçº¯æ–‡æœ¬ï¼Œä¿ç•™æ®µè½
                        const paragraphs = contentElement.querySelectorAll('p');
                        const contentArray = [];
                        paragraphs.forEach(p => {
                            contentArray.push(p.textContent);
                        });
                        content = contentArray.join('\n\n');
                    }
                    
                    // è·å–ä¹¦ç­¾çŠ¶æ€
                    const bookmarkElement = entry.querySelector('.journal-bookmark');
                    const isBookmarked = bookmarkElement.textContent === 'ğŸ”–';
                    
                    // æ›´æ–°è¯¦æƒ…é¡µå†…å®¹
                    detailDateText.textContent = dateText;
                    detailTitle.value = title;
                    detailBody.value = content;
                    detailBookmark.innerHTML = isBookmarked ? '<i>ğŸ”–</i>' : '<i>ğŸ”—</i>';
                    
                    // æ˜¾ç¤ºè¯¦æƒ…é¡µ
                    detailPage.classList.add('active');
                    
                    // èšç„¦åˆ°æ ‡é¢˜è¾“å…¥æ¡†
                    setTimeout(() => {
                        detailTitle.focus();
                    }, 300);
                });
            }
            
            // ä¸ºä¹¦ç­¾æ·»åŠ ç‚¹å‡»äº‹ä»¶çš„å‡½æ•°
            function addBookmarkClickEvent(bookmarkElement) {
                bookmarkElement.addEventListener('click', function() {
                    // åˆ‡æ¢ä¹¦ç­¾çŠ¶æ€
                    if (this.textContent === 'ğŸ”–') {
                        this.textContent = 'ğŸ”—';
                        alert('å·²å–æ¶ˆæ”¶è—');
                    } else {
                        this.textContent = 'ğŸ”–';
                        alert('å·²æ·»åŠ åˆ°æ”¶è—å¤¹');
                    }
                });
            }
            
            // ä¸ºæ‰€æœ‰ç°æœ‰æ—¥è®°æ¡ç›®æ·»åŠ ç‚¹å‡»äº‹ä»¶
            journalEntries.forEach(entry => {
                addJournalEntryClickEvent(entry);
            });
            
            // ä¸ºæ‰€æœ‰ç°æœ‰ä¹¦ç­¾æ·»åŠ ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.journal-bookmark').forEach(bookmark => {
                addBookmarkClickEvent(bookmark);
            });
            
            // æ›´æ–°çŠ¶æ€æ æ—¶é—´
            function updateStatusBarTime() {
                const now = new Date();
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                statusBarTime.textContent = `${hours}:${minutes}`;
            }
            
            // åˆå§‹åŒ–æ—¶é—´å¹¶æ¯ç§’æ›´æ–°ä¸€æ¬¡
            updateStatusBarTime();
            setInterval(updateStatusBarTime, 1000);
            
            // ç»Ÿè®¡æ•°æ®
            const stats = {
                entriesThisYear: 0,
                wordsWritten: 0,
                daysJournaled: 0
            };
            
            // è®¡ç®—ç»Ÿè®¡æ•°æ®
            function calculateStats() {
                // è·å–æ‰€æœ‰æ—¥è®°æ¡ç›®
                const entries = document.querySelectorAll('.journal-entry');
                
                // å½“å‰å¹´ä»½
                const currentYear = new Date().getFullYear();
                
                // ç»Ÿè®¡æ•°æ®
                let entriesThisYear = 0;
                let wordsWritten = 0;
                let daysJournaled = new Set(); // ä½¿ç”¨Seté¿å…é‡å¤è®¡ç®—åŒä¸€å¤©
                
                // éå†æ‰€æœ‰æ—¥è®°æ¡ç›®
                entries.forEach(entry => {
                    // è·å–æ—¥æœŸæ–‡æœ¬
                    const dateText = entry.querySelector('.journal-date span').textContent;
                    
                    // æ£€æŸ¥æ˜¯å¦æ˜¯ä»Šå¹´çš„æ¡ç›®
                    const entryYear = new Date(dateText).getFullYear();
                    if (entryYear === currentYear) {
                        entriesThisYear++;
                    }
                    
                    // å°†æ—¥æœŸæ·»åŠ åˆ°å·²è®°å½•æ—¥æœŸé›†åˆä¸­
                    const entryDate = new Date(dateText).toLocaleDateString();
                    daysJournaled.add(entryDate);
                    
                    // è®¡ç®—å•è¯æ•°
                    const contentElement = entry.querySelector('.journal-content');
                    if (contentElement) {
                        const text = contentElement.textContent.trim();
                        // è®¡ç®—ä¸­æ–‡å­—ç¬¦æ•°å’Œè‹±æ–‡å•è¯æ•°
                        const chineseChars = text.match(/[\u4e00-\u9fa5]/g) || [];
                        const englishWords = text.match(/[a-zA-Z]+/g) || [];
                        
                        // ä¸­æ–‡å­—ç¬¦å’Œè‹±æ–‡å•è¯éƒ½è®¡å…¥æ€»å­—æ•°
                        wordsWritten += chineseChars.length + englishWords.length;
                    }
                });
                
                // æ›´æ–°DOM
                document.querySelector('.stat-item:nth-child(1) .stat-value').innerHTML = `<i>ğŸ“</i>${entriesThisYear}`;
                document.querySelector('.stat-item:nth-child(2) .stat-value').innerHTML = `<i>ğŸ’¬</i>${wordsWritten}`;
                document.querySelector('.stat-item:nth-child(3) .stat-value').innerHTML = `<i>ğŸ“…</i>${daysJournaled.size}`;
            }
            
            // åˆå§‹åŒ–ç»Ÿè®¡
            calculateStats();

            // æ£€æŸ¥æ˜¯å¦æœ‰æœªä¿å­˜çš„æ›´æ”¹
            function hasUnsavedChanges() {
                if (!currentEntry) {
                    // æ–°å»ºæ¨¡å¼ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰è¾“å…¥å†…å®¹
                    return detailTitle.value.trim() !== '' || detailBody.value.trim() !== '';
                } else {
                    // ç¼–è¾‘æ¨¡å¼ï¼Œæ£€æŸ¥æ˜¯å¦ä¸åŸå†…å®¹ä¸åŒ
                    const titleElement = currentEntry.querySelector('.journal-title');
                    const originalTitle = titleElement ? titleElement.textContent : '';
                    
                    const contentElement = currentEntry.querySelector('.journal-content');
                    let originalContent = '';
                    if (contentElement) {
                        const paragraphs = contentElement.querySelectorAll('p');
                        const contentArray = [];
                        paragraphs.forEach(p => {
                            contentArray.push(p.textContent);
                        });
                        originalContent = contentArray.join('\n\n');
                    }
                    
                    return detailTitle.value !== originalTitle || detailBody.value !== originalContent;
                }
            }
            
            // æ·»åŠ é”®ç›˜å¿«æ·é”®æ”¯æŒ
            document.addEventListener('keydown', function(e) {
                // å¦‚æœè¯¦æƒ…é¡µé¢å¤„äºæ´»åŠ¨çŠ¶æ€
                if (detailPage.classList.contains('active')) {
                    // ESC é”®è¿”å›
                    if (e.key === 'Escape') {
                        detailBack.click();
                    }
                    
                    // Ctrl+S æˆ– Cmd+S ä¿å­˜
                    if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                        e.preventDefault(); // é˜»æ­¢æµè§ˆå™¨é»˜è®¤ä¿å­˜è¡Œä¸º
                        saveButton.click();
                    }
                }
            });

            // åˆ é™¤æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            detailDelete.addEventListener('click', function() {
                if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ç¯‡æ—¥è®°å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚')) {
                    if (currentEntry) {
                        // æ·»åŠ æ·¡å‡ºåŠ¨ç”»
                        currentEntry.style.transition = 'opacity 0.3s ease-out';
                        currentEntry.style.opacity = '0';
                        
                        // ç­‰å¾…åŠ¨ç”»å®Œæˆååˆ é™¤å…ƒç´ 
                        setTimeout(() => {
                            currentEntry.remove();
                            
                            // é‡æ–°è®¡ç®—ç»Ÿè®¡æ•°æ®
                            calculateStats();
                            saveJournalEntries();
                            
                            // å…³é—­è¯¦æƒ…é¡µ
                            detailPage.classList.remove('active');
                            
                            // æ˜¾ç¤ºåˆ é™¤æˆåŠŸæç¤º
                            showNotification('æ—¥è®°å·²åˆ é™¤');
                        }, 300);
                    }
                }
            });

            // æ·»åŠ å³é”®èœå•åŠŸèƒ½
            journalEntries.forEach(entry => {
                entry.addEventListener('contextmenu', function(e) {
                    e.preventDefault();
                    showContextMenu(e, entry);
                });
            });
            
            // åˆ›å»ºå³é”®èœå•
            function createContextMenu() {
                const menu = document.createElement('div');
                menu.className = 'context-menu';
                menu.id = 'context-menu';
                menu.innerHTML = `
                    <div class="context-menu-item" id="context-edit">
                        <i>âœï¸</i>
                        <span>ç¼–è¾‘</span>
                    </div>
                    <div class="context-menu-item" id="context-bookmark">
                        <i>ğŸ”–</i>
                        <span>æ”¶è—</span>
                    </div>
                    <div class="context-menu-item" id="context-delete">
                        <i>ğŸ—‘ï¸</i>
                        <span>åˆ é™¤</span>
                    </div>
                `;
                document.body.appendChild(menu);
                return menu;
            }
            
            // æ˜¾ç¤ºå³é”®èœå•
            function showContextMenu(e, entry) {
                // è·å–æˆ–åˆ›å»ºå³é”®èœå•
                let contextMenu = document.getElementById('context-menu');
                if (!contextMenu) {
                    contextMenu = createContextMenu();
                    
                    // æ·»åŠ èœå•é¡¹ç‚¹å‡»äº‹ä»¶
                    document.getElementById('context-edit').addEventListener('click', function() {
                        const targetEntry = contextMenu.targetEntry;
                        if (targetEntry) {
                            // æ¨¡æ‹Ÿç‚¹å‡»æ—¥è®°æ¡ç›®ï¼Œæ‰“å¼€ç¼–è¾‘é¡µé¢
                            simulateEntryClick(targetEntry);
                        }
                        hideContextMenu();
                    });
                    
                    document.getElementById('context-bookmark').addEventListener('click', function() {
                        const targetEntry = contextMenu.targetEntry;
                        if (targetEntry) {
                            const bookmark = targetEntry.querySelector('.journal-bookmark');
                            // åˆ‡æ¢ä¹¦ç­¾çŠ¶æ€
                            if (bookmark.textContent === 'ğŸ”–') {
                                bookmark.textContent = 'ğŸ”—';
                                showNotification('å·²å–æ¶ˆæ”¶è—');
                            } else {
                                bookmark.textContent = 'ğŸ”–';
                                showNotification('å·²æ·»åŠ åˆ°æ”¶è—å¤¹');
                            }
                        }
                        hideContextMenu();
                    });
                    
                    document.getElementById('context-delete').addEventListener('click', function() {
                        const targetEntry = contextMenu.targetEntry;
                        if (targetEntry && confirm('ç¡®å®šè¦åˆ é™¤è¿™ç¯‡æ—¥è®°å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚')) {
                            // æ·»åŠ æ·¡å‡ºåŠ¨ç”»
                            targetEntry.style.transition = 'opacity 0.3s ease-out';
                            targetEntry.style.opacity = '0';
                            
                            // ç­‰å¾…åŠ¨ç”»å®Œæˆååˆ é™¤å…ƒç´ 
                            setTimeout(() => {
                                targetEntry.remove();
                                
                                // é‡æ–°è®¡ç®—ç»Ÿè®¡æ•°æ®
                                calculateStats();
                                saveJournalEntries();
                                
                                // æ˜¾ç¤ºåˆ é™¤æˆåŠŸæç¤º
                                showNotification('æ—¥è®°å·²åˆ é™¤');
                            }, 300);
                        }
                        hideContextMenu();
                    });
                    
                    // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­èœå•
                    document.addEventListener('click', function(e) {
                        if (!contextMenu.contains(e.target)) {
                            hideContextMenu();
                        }
                    });
                }
                
                // ä¿å­˜ç›®æ ‡æ¡ç›®å¼•ç”¨
                contextMenu.targetEntry = entry;
                
                // æ›´æ–°ä¹¦ç­¾èœå•é¡¹æ–‡æœ¬
                const bookmarkItem = document.getElementById('context-bookmark');
                const isBookmarked = entry.querySelector('.journal-bookmark').textContent === 'ğŸ”–';
                bookmarkItem.querySelector('span').textContent = isBookmarked ? 'å–æ¶ˆæ”¶è—' : 'æ”¶è—';
                bookmarkItem.querySelector('i').textContent = isBookmarked ? 'ğŸ”—' : 'ğŸ”–';
                
                // è®¾ç½®èœå•ä½ç½®
                const menuWidth = 150; // ä¼°è®¡çš„èœå•å®½åº¦
                const menuHeight = 120; // ä¼°è®¡çš„èœå•é«˜åº¦
                
                // è®¡ç®—ä½ç½®ï¼Œç¡®ä¿èœå•ä¸ä¼šè¶…å‡ºè§†å£
                let x = e.clientX;
                let y = e.clientY;
                
                if (x + menuWidth > window.innerWidth) {
                    x = window.innerWidth - menuWidth;
                }
                
                if (y + menuHeight > window.innerHeight) {
                    y = window.innerHeight - menuHeight;
                }
                
                contextMenu.style.left = x + 'px';
                contextMenu.style.top = y + 'px';
                contextMenu.style.display = 'block';
            }
            
            // éšè—å³é”®èœå•
            function hideContextMenu() {
                const contextMenu = document.getElementById('context-menu');
                if (contextMenu) {
                    contextMenu.style.display = 'none';
                }
            }
            
            // æ¨¡æ‹Ÿç‚¹å‡»æ—¥è®°æ¡ç›®
            function simulateEntryClick(entry) {
                // ä¿å­˜å½“å‰æ¡ç›®å¼•ç”¨
                currentEntry = entry;
                
                // è·å–æ—¥è®°å†…å®¹
                const dateText = entry.querySelector('.journal-date span').textContent;
                const titleElement = entry.querySelector('.journal-title');
                const title = titleElement ? titleElement.textContent : '';
                
                // è·å–å†…å®¹æ–‡æœ¬
                const contentElement = entry.querySelector('.journal-content');
                let content = '';
                if (contentElement) {
                    // å°†HTMLå†…å®¹è½¬æ¢ä¸ºçº¯æ–‡æœ¬ï¼Œä¿ç•™æ®µè½
                    const paragraphs = contentElement.querySelectorAll('p');
                    const contentArray = [];
                    paragraphs.forEach(p => {
                        contentArray.push(p.textContent);
                    });
                    content = contentArray.join('\n\n');
                }
                
                // è·å–ä¹¦ç­¾çŠ¶æ€
                const bookmarkElement = entry.querySelector('.journal-bookmark');
                const isBookmarked = bookmarkElement.textContent === 'ğŸ”–';
                
                // æ›´æ–°è¯¦æƒ…é¡µå†…å®¹
                detailDateText.textContent = dateText;
                detailTitle.value = title;
                detailBody.value = content;
                detailBookmark.innerHTML = isBookmarked ? '<i>ğŸ”–</i>' : '<i>ğŸ”—</i>';
                
                // æ˜¾ç¤ºè¯¦æƒ…é¡µ
                detailPage.classList.add('active');
                
                // èšç„¦åˆ°æ ‡é¢˜è¾“å…¥æ¡†
                setTimeout(() => {
                    detailTitle.focus();
                }, 300);
            }
            
            // æ˜¾ç¤ºé€šçŸ¥
            function showNotification(message) {
                // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨é€šçŸ¥å…ƒç´ 
                let notification = document.getElementById('notification');
                if (!notification) {
                    notification = document.createElement('div');
                    notification.id = 'notification';
                    document.body.appendChild(notification);
                }
                
                // è®¾ç½®é€šçŸ¥å†…å®¹å’Œæ ·å¼
                notification.textContent = message;
                notification.className = 'notification';
                
                // æ˜¾ç¤ºé€šçŸ¥
                setTimeout(() => {
                    notification.classList.add('show');
                }, 10);
                
                // 3ç§’åéšè—é€šçŸ¥
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
            
            // ä¸ºæ–°åˆ›å»ºçš„æ—¥è®°æ¡ç›®æ·»åŠ å³é”®èœå•
            function addContextMenuToEntry(entry) {
                entry.addEventListener('contextmenu', function(e) {
                    e.preventDefault();
                    showContextMenu(e, entry);
                });
            }

            // Load journal entries from local storage
            loadJournalEntries();

            // Save journal entries to local storage
            function saveJournalEntries() {
                const entries = [];
                document.querySelectorAll('.journal-entry').forEach(entry => {
                    const date = entry.querySelector('.journal-date span').textContent;
                    const title = entry.querySelector('.journal-title') ? entry.querySelector('.journal-title').textContent : '';
                    const content = Array.from(entry.querySelectorAll('.journal-content p')).map(p => p.textContent).join('\n\n');
                    const colorClass = Array.from(entry.classList).find(cls => cls.startsWith('color-'));
                    entries.push({ date, title, content, colorClass });
                });
                localStorage.setItem('journalEntries', JSON.stringify(entries));
            }

            // Load journal entries from local storage
            function loadJournalEntries() {
                const entries = JSON.parse(localStorage.getItem('journalEntries')) || [];
                entries.forEach(entry => {
                    const newEntry = createNewJournalEntry(entry.title, entry.content, entry.date, entry.colorClass);
                    journalContainer.appendChild(newEntry);
                });
                calculateStats();
            }

            // Create new journal entry with optional date and color class
            function createNewJournalEntry(title, content, date = getCurrentDateFormatted(), colorClass = null) {
                const newEntry = document.createElement('article');
                const colorClasses = ['color-yellow', 'color-blue', 'color-green', 'color-purple', 'color-pink'];
                const randomColorClass = colorClass || colorClasses[Math.floor(Math.random() * colorClasses.length)];
                newEntry.className = `journal-entry ${randomColorClass}`;
                const dateDiv = document.createElement('div');
                dateDiv.className = 'journal-date';
                const dateSpan = document.createElement('span');
                dateSpan.textContent = date;
                const bookmarkSpan = document.createElement('span');
                bookmarkSpan.className = 'journal-bookmark';
                bookmarkSpan.textContent = 'ğŸ”—';
                dateDiv.appendChild(dateSpan);
                dateDiv.appendChild(bookmarkSpan);
                newEntry.appendChild(dateDiv);
                if (title) {
                    const titleElement = document.createElement('h3');
                    titleElement.className = 'journal-title';
                    titleElement.textContent = title;
                    newEntry.appendChild(titleElement);
                }
                const contentDiv = document.createElement('div');
                contentDiv.className = 'journal-content';
                const paragraphs = content.split('\n\n');
                paragraphs.forEach(paragraph => {
                    if (paragraph.trim()) {
                        const p = document.createElement('p');
                        p.textContent = paragraph;
                        contentDiv.appendChild(p);
                    }
                });
                newEntry.appendChild(contentDiv);
                const decorationDiv = document.createElement('div');
                decorationDiv.className = 'journal-decoration';
                let decorationPattern = '';
                switch (randomColorClass) {
                    case 'color-yellow':
                        decorationPattern = 'âœ¨ ğŸ“ ğŸ’­ ğŸ§  ğŸ“š âœ¨ ğŸ“ ğŸ’­ ğŸ§  ğŸ“š';
                        break;
                    case 'color-blue':
                        decorationPattern = 'ğŸŒŸ ğŸ“· ğŸ­ ğŸŒˆ âœ¨ ğŸŒŸ ğŸ“· ğŸ­ ğŸŒˆ âœ¨';
                        break;
                    case 'color-green':
                        decorationPattern = 'ğŸŒ± ğŸ’¡ ğŸ”„ ğŸ“Š âœ… ğŸŒ± ğŸ’¡ ğŸ”„ ğŸ“Š âœ…';
                        break;
                    case 'color-purple':
                        decorationPattern = 'â˜• ğŸ“š ğŸŒ ğŸ‘« ğŸŒˆ â˜• ğŸ“š ğŸŒ ğŸ‘« ğŸŒˆ';
                        break;
                    case 'color-pink':
                        decorationPattern = 'ğŸ’¡ ğŸš€ ğŸ“± ğŸ¨ ğŸ“Š ğŸ’¡ ğŸš€ ğŸ“± ğŸ¨ ğŸ“Š';
                        break;
                }
                decorationDiv.textContent = decorationPattern;
                newEntry.appendChild(decorationDiv);
                addJournalEntryClickEvent(newEntry);
                addBookmarkClickEvent(newEntry.querySelector('.journal-bookmark'));
                addContextMenuToEntry(newEntry);
                return newEntry;
            }
        });
    </script>
</body>
</html>
